<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive 8-Week Running & Strength Plan</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals -->
    <!-- Application Structure Plan: A week-based carousel is the primary navigation. Each slide is a self-contained weekly dashboard showing goals and the daily schedule. This consolidates information, creating a focused, step-by-step user flow. Workout details are now in a full-width accordion/dropdown below the weekly grid for better readability. -->
    <!-- Visualization & Content Choices: 1. Carousel: For week-to-week navigation. 2. Full-Width Accordion: Replaces the inline dropdown. Clicking a day expands its details in a shared container below the 7-day grid. The active day is highlighted. 3. Workout Logging: Added a "Mark as Complete" checkbox, metric inputs, and a notes field to each workout detail view. Data is saved to localStorage. 4. Progress Indicator: Completed days now have a green background. Weekly and total progress bars have been added. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        html {
            scroll-behavior: smooth;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827;
            color: #D1D5DB;
        }
        .carousel-container {
            overflow: hidden;
            position: relative;
        }
        .carousel-track {
            display: flex;
            transition: transform 0.5s ease-in-out;
        }
        .carousel-slide {
            min-width: 100%;
            box-sizing: border-box;
        }
        .full-width-details {
            transition: max-height 0.5s ease-in-out;
        }
        .day-header.active-day {
            background-color: #fbbf24; /* amber-400 */
            color: #111827;
        }
        .day-header.active-day h4, .day-header.active-day p {
            color: #1f2937; /* gray-800 */
        }
        .progress-bar {
            transition: width 0.5s ease-in-out;
        }
    </style>
</head>
<body class="antialiased">

    <div id="app" class="container mx-auto p-4 md:p-8 max-w-7xl">
        
        <header class="text-center mb-8 md:mb-12 relative">
            <h1 class="text-3xl md:text-5xl font-bold text-gray-100">Your 8-Week Training Plan</h1>
            <p class="text-lg md:text-xl text-gray-400 mt-2">To a Sub-25min 5k & Sub-60min 10k</p>
            <div class="mt-6 max-w-2xl mx-auto">
                <div class="w-full bg-gray-700 rounded-full h-2.5">
                    <div id="total-progress-bar" class="bg-green-500 h-2.5 rounded-full progress-bar" style="width: 0%"></div>
                </div>
                <p id="total-progress-text" class="text-sm text-gray-400 mt-1 text-right">Overall Progress: 0%</p>
            </div>
        </header>

        <main>
            <!-- Weekly Carousel Section -->
            <section id="carousel-section" class="mb-8 md:mb-12 bg-gray-800 p-6 rounded-xl shadow-sm">
                <div class="carousel-container">
                    <div id="carousel-track" class="carousel-track">
                        <!-- Carousel slides will be populated by JS -->
                    </div>
                </div>
                <div class="flex justify-between items-center mt-6">
                    <button id="prev-btn" class="bg-amber-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-700 transition-colors disabled:bg-gray-600">
                        &#8592; Prev
                    </button>
                    <div id="carousel-dots" class="flex space-x-2">
                        <!-- Dots will be populated by JS -->
                    </div>
                    <button id="next-btn" class="bg-amber-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-700 transition-colors disabled:bg-gray-600">
                        Next &#8594;
                    </button>
                </div>
            </section>

        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const planData = {
                paceGuide: {
                    labels: ['Easy Run', 'Tempo Run', 'Interval (400m)', 'Long Run'],
                    displayPace: ['11:00-12:00', '9:30-10:00', '2:00-2:05/lap', '11:30-12:30']
                },
                strengthWorkouts: {
                    'A': [
                        { name: 'Goblet Squats', desc: 'Hold a weight at your chest. Squat down keeping your chest up and back straight.', sets: '2-3', reps: '10-15' },
                        { name: 'Walking Lunges', desc: 'Step forward into a lunge, then push off and step into the next lunge with the other leg.', sets: '2-3', reps: '10-15/leg' },
                        { name: 'Glute Bridges', desc: 'Lie on your back, knees bent. Lift hips until your body is in a straight line from shoulders to knees.', sets: '2-3', reps: '10-15' },
                        { name: 'Plank', desc: 'Hold a push-up position with a flat back and engaged core.', sets: '2-3', reps: '30-60s' },
                        { name: 'Calf Raises', desc: 'Stand on a flat surface and raise your heels up, then lower them back down.', sets: '2-3', reps: '10-15' },
                    ],
                    'B': [
                        { name: 'Single-Leg Deadlifts', desc: 'Stand on one leg, hinge at your hips, extending the other leg straight behind you.', sets: '2-3', reps: '10-15/leg' },
                        { name: 'Step-Ups', desc: 'Use a bench or sturdy chair. Step up with one foot, then the other. Alternate lead leg.', sets: '2-3', reps: '10-15/leg' },
                        { name: 'Push-ups', desc: 'Perform standard push-ups, or modified on your knees if needed.', sets: '2-3', reps: '10-15' },
                        { name: 'Dumbbell Rows', desc: 'Lean on a bench. Pull a dumbbell up towards your chest, keeping your elbow close.', sets: '2-3', reps: '10-15/arm' },
                        { name: 'Russian Twists', desc: 'Sit with knees bent, feet off the ground. Twist your torso from side to side.', sets: '2-3', reps: '10-15/side' },
                    ]
                },
                weeklyPlan: [
                    { intervalReps: 6, tempoMins: 20, longRunDist: 3.5 },
                    { intervalReps: 7, tempoMins: 25, longRunDist: 4.0 },
                    { intervalReps: 8, tempoMins: 30, longRunDist: 4.5 },
                    { intervalReps: 9, tempoMins: 35, longRunDist: 5.0 },
                    { intervalReps: 10, tempoMins: 40, longRunDist: 5.5 },
                    { intervalReps: 11, tempoMins: 40, longRunDist: 6.0 },
                    { intervalReps: 12, tempoMins: 30, longRunDist: 6.5 },
                    { intervalReps: 8, tempoMins: 20, longRunDist: 7.0 },
                ]
            };

            const daysOfWeek = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
            const workoutTypes = ['Interval Run', 'Strength A', 'Tempo Run', 'Strength B', 'Rest', 'Long Run', 'Rest'];
            const totalWeeks = planData.weeklyPlan.length;
            const totalWorkouts = totalWeeks * daysOfWeek.length;

            const carouselTrack = document.getElementById('carousel-track');
            const dotsContainer = document.getElementById('carousel-dots');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const totalProgressBar = document.getElementById('total-progress-bar');
            const totalProgressText = document.getElementById('total-progress-text');
            
            let currentWeekIndex = 0;
            let workoutLogs = JSON.parse(localStorage.getItem('workoutLogs')) || {};

            function saveLogs() {
                localStorage.setItem('workoutLogs', JSON.stringify(workoutLogs));
            }

            function updateProgress() {
                const completedCount = Object.values(workoutLogs).filter(log => log.completed).length;
                const totalPercentage = (completedCount / totalWorkouts) * 100;
                totalProgressBar.style.width = `${totalPercentage}%`;
                totalProgressText.textContent = `Overall Progress: ${Math.round(totalPercentage)}%`;
            }

            function renderCarousel() {
                carouselTrack.innerHTML = '';
                dotsContainer.innerHTML = '';

                planData.weeklyPlan.forEach((weekData, index) => {
                    const slide = document.createElement('div');
                    slide.className = 'carousel-slide p-2';

                    let completedInWeek = 0;
                    for (let i = 0; i < daysOfWeek.length; i++) {
                        if (workoutLogs[`${index}-${i}`] && workoutLogs[`${index}-${i}`].completed) {
                            completedInWeek++;
                        }
                    }
                    const weeklyPercentage = (completedInWeek / daysOfWeek.length) * 100;

                    slide.innerHTML = `
                        <h2 class="text-2xl font-bold text-amber-400 mb-2 text-center">Week ${index + 1}</h2>
                        <div class="w-full bg-gray-600 rounded-full h-2 mb-4">
                            <div class="bg-green-500 h-2 rounded-full progress-bar" style="width: ${weeklyPercentage}%"></div>
                        </div>
                        <div class="mb-6 grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                            <div class="bg-gray-700 p-3 rounded-lg"><p class="text-sm text-amber-200">Intervals</p><p class="font-bold text-xl text-gray-100">${weekData.intervalReps} x 400m</p></div>
                            <div class="bg-gray-700 p-3 rounded-lg"><p class="text-sm text-amber-200">Tempo</p><p class="font-bold text-xl text-gray-100">${weekData.tempoMins} mins</p></div>
                            <div class="bg-gray-700 p-3 rounded-lg"><p class="text-sm text-amber-200">Long Run</p><p class="font-bold text-xl text-gray-100">${weekData.longRunDist} miles</p></div>
                            <div class="bg-gray-700 p-3 rounded-lg"><p class="text-sm text-amber-200">Strength</p><p class="font-bold text-xl text-gray-100">2 sessions</p></div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-7 gap-4">
                            ${daysOfWeek.map((day, dayIndex) => {
                                const workoutType = workoutTypes[dayIndex];
                                const isRest = workoutType === 'Rest';
                                const logKey = `${index}-${dayIndex}`;
                                const isCompleted = workoutLogs[logKey] && workoutLogs[logKey].completed;
                                let bgColor = isRest ? 'bg-gray-700' : 'bg-gray-700/50';
                                if (isCompleted) {
                                    bgColor = 'bg-green-600 hover:bg-green-700';
                                }
                                return `
                                <div class="day-header p-4 rounded-lg shadow-sm cursor-pointer transition-colors hover:bg-gray-600/50 ${bgColor} flex flex-col justify-center text-center min-h-[110px] gap-1" data-day-index="${dayIndex}" data-week-index="${index}">
                                    <p class="font-bold ${isCompleted ? 'text-gray-200' : 'text-gray-400'} text-sm">${day.toUpperCase()}</p>
                                    <h4 class="text-xl font-semibold ${isCompleted ? 'text-white' : (isRest ? 'text-gray-400' : 'text-amber-400')}">${workoutType}</h4>
                                </div>`;
                            }).join('')}
                        </div>
                        <div id="details-container-week-${index}" class="full-width-details max-h-0 overflow-hidden mt-4">
                            <!-- JS will inject content here -->
                        </div>
                    `;
                    carouselTrack.appendChild(slide);

                    const dot = document.createElement('button');
                    dot.className = 'w-3 h-3 rounded-full transition-colors';
                    dot.dataset.index = index;
                    dotsContainer.appendChild(dot);
                });
            }

            function updateCarousel() {
                if (carouselTrack.querySelector('.carousel-slide')) {
                    const slideWidth = carouselTrack.querySelector('.carousel-slide').clientWidth;
                    carouselTrack.style.transform = `translateX(-${currentWeekIndex * slideWidth}px)`;
                }

                const dots = dotsContainer.querySelectorAll('button');
                dots.forEach((dot, index) => {
                    dot.className = `w-3 h-3 rounded-full transition-colors ${index === currentWeekIndex ? 'bg-amber-400' : 'bg-gray-600'}`;
                });

                prevBtn.disabled = currentWeekIndex === 0;
                nextBtn.disabled = currentWeekIndex === totalWeeks - 1;
            }

            function generateWorkoutDetailContent(dayIndex, weekIndex) {
                const workoutType = workoutTypes[dayIndex];
                const weekData = planData.weeklyPlan[weekIndex];
                const logKey = `${weekIndex}-${dayIndex}`;
                const log = workoutLogs[logKey] || {};
                let content = '';
                let logInputs = '';

                if (workoutType.includes('Run')) {
                    logInputs = `
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label for="log-dist-${logKey}" class="block text-sm font-medium text-gray-300">Distance (mi)</label>
                                <input type="number" id="log-dist-${logKey}" value="${log.distance || ''}" class="mt-1 block w-full bg-gray-800 border-gray-600 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm p-2">
                            </div>
                            <div>
                                <label for="log-time-${logKey}" class="block text-sm font-medium text-gray-300">Time (mm:ss)</label>
                                <input type="text" id="log-time-${logKey}" value="${log.time || ''}" class="mt-1 block w-full bg-gray-800 border-gray-600 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm p-2">
                            </div>
                        </div>
                    `;
                }
                
                if (workoutType === 'Interval Run') {
                    content = `<div class="space-y-3"><div><strong class="text-gray-200">Warm-up:</strong> 10-15 minutes of easy jogging.</div><div><strong class="text-gray-200">Workout:</strong> ${weekData.intervalReps} x 400 meters at goal 5k pace.</div><div><strong class="text-gray-200">Target Pace:</strong> ${planData.paceGuide.displayPace[2]}.</div><div><strong class="text-gray-200">Recovery:</strong> 400 meters of slow jogging or walking between each interval.</div><div><strong class="text-gray-200">Cool-down:</strong> 10-15 minutes of easy jogging.</div></div>`;
                } else if (workoutType === 'Tempo Run') {
                     content = `<div class="space-y-3"><div><strong class="text-gray-200">Warm-up:</strong> 10 minutes of easy jogging.</div><div><strong class="text-gray-200">Workout:</strong> Run for ${weekData.tempoMins} minutes at a tempo pace.</div><div><strong class="text-gray-200">Target Pace:</strong> ${planData.paceGuide.displayPace[1]} min/mile. Should feel "comfortably hard".</div><div><strong class="text-gray-200">Cool-down:</strong> 10 minutes of easy jogging.</div></div>`;
                } else if (workoutType === 'Long Run') {
                     content = `<div class="space-y-3"><div><strong class="text-gray-200">Workout:</strong> Run for ${weekData.longRunDist} miles.</div><div><strong class="text-gray-200">Target Pace:</strong> ${planData.paceGuide.displayPace[0]} or ${planData.paceGuide.displayPace[3]} min/mile. Keep it easy and conversational.</div><div><strong class="text-gray-200">Purpose:</strong> Build endurance. The goal is to cover the distance, not to run it fast.</div></div>`;
                } else if (workoutType.startsWith('Strength')) {
                    const type = workoutType.endsWith('A') ? 'A' : 'B';
                    const exercises = planData.strengthWorkouts[type];
                    content = `<ul class="divide-y divide-gray-700">${exercises.map(ex => `<li class="flex justify-between items-center py-4"><div class="flex-grow pr-4"><strong class="block text-base font-medium text-gray-100">${ex.name}</strong><p class="text-sm text-gray-400">${ex.desc}</p></div><div class="text-right flex-shrink-0 w-24"><p class="text-base font-semibold text-amber-400">${ex.sets} sets</p><p class="text-sm text-gray-400">${ex.reps} reps</p></div></li>`).join('')}</ul>`;
                } else {
                    content = `<p>Rest is crucial for recovery and muscle repair. You can do some light activity like walking or stretching, but avoid strenuous exercise.</p>`;
                }


                return `
                    <div class="workout-description">${content}</div>
                    <div class="log-section mt-6 pt-6 border-t border-gray-600">
                        <h5 class="text-lg font-bold text-gray-100 mb-4">Log Your Workout</h5>
                        <div class="space-y-4">
                            <div class="flex items-center">
                                <input id="log-completed-${logKey}" type="checkbox" ${log.completed ? 'checked' : ''} class="h-5 w-5 rounded border-gray-500 text-amber-600 focus:ring-amber-500">
                                <label for="log-completed-${logKey}" class="ml-3 block text-sm font-medium text-gray-200">Mark as Complete</label>
                            </div>
                            ${logInputs}
                            <div>
                                <label for="log-notes-${logKey}" class="block text-sm font-medium text-gray-300">Notes</label>
                                <textarea id="log-notes-${logKey}" rows="3" class="mt-1 block w-full bg-gray-800 border-gray-600 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 sm:text-sm p-2">${log.notes || ''}</textarea>
                            </div>
                            <div class="flex justify-end items-center">
                                <span id="save-confirm-${logKey}" class="text-green-400 text-sm mr-4 opacity-0 transition-opacity">Saved!</span>
                                <button class="save-log-btn bg-amber-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-700 transition-colors" data-log-key="${logKey}">Save Log</button>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            prevBtn.addEventListener('click', () => {
                if (currentWeekIndex > 0) {
                    currentWeekIndex--;
                    updateCarousel();
                }
            });

            nextBtn.addEventListener('click', () => {
                if (currentWeekIndex < totalWeeks - 1) {
                    currentWeekIndex++;
                    updateCarousel();
                }
            });

            dotsContainer.addEventListener('click', (e) => {
                if(e.target.tagName === 'BUTTON') {
                    currentWeekIndex = parseInt(e.target.dataset.index);
                    updateCarousel();
                }
            });

            carouselTrack.addEventListener('click', (e) => {
                const header = e.target.closest('.day-header');
                if (header) {
                    const weekIndex = parseInt(header.dataset.weekIndex);
                    const dayIndex = parseInt(header.dataset.dayIndex);
                    
                    const slide = header.closest('.carousel-slide');
                    const detailsContainer = slide.querySelector(`#details-container-week-${weekIndex}`);
                    
                    const wasActive = header.classList.contains('active-day');

                    slide.querySelectorAll('.day-header').forEach(h => h.classList.remove('active-day'));

                    if (wasActive) {
                        detailsContainer.style.maxHeight = '0px';
                    } else {
                        header.classList.add('active-day');
                        const content = generateWorkoutDetailContent(dayIndex, weekIndex);
                        detailsContainer.innerHTML = `<div class="p-6 bg-gray-700 rounded-lg">${content}</div>`;
                        
                        requestAnimationFrame(() => {
                            detailsContainer.style.maxHeight = detailsContainer.scrollHeight + 'px';
                        });
                    }
                }

                if (e.target.classList.contains('save-log-btn')) {
                    const logKey = e.target.dataset.logKey;
                    const log = workoutLogs[logKey] || {};

                    log.completed = document.getElementById(`log-completed-${logKey}`).checked;
                    log.notes = document.getElementById(`log-notes-${logKey}`).value;
                    
                    const distInput = document.getElementById(`log-dist-${logKey}`);
                    if (distInput) log.distance = distInput.value;

                    const timeInput = document.getElementById(`log-time-${logKey}`);
                    if (timeInput) log.time = timeInput.value;

                    workoutLogs[logKey] = log;
                    saveLogs();
                    
                    const saveConfirm = document.getElementById(`save-confirm-${logKey}`);
                    saveConfirm.classList.remove('opacity-0');
                    setTimeout(() => saveConfirm.classList.add('opacity-0'), 2000);

                    renderCarousel();
                    updateCarousel();
                    updateProgress();
                }
            });

            // Initial render
            renderCarousel();
            updateCarousel();
            updateProgress();
            
            window.addEventListener('resize', updateCarousel);
        });
    </script>
</body>
</html>
